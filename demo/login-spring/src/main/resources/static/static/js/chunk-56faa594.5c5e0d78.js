(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-56faa594"],{"3ded":function(e,t,r){},7803:function(e,t,r){"use strict";r.r(t);var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"page-register"},[t("article",{staticClass:"header"},[t("header",[t("el-avatar",{attrs:{icon:"el-icon-user-solid",shape:"circle"}}),t("span",{staticClass:"login"},[t("em",{staticClass:"bold"},[e._v("已有账号？")]),t("a",{attrs:{href:"/login"}},[t("el-button",{attrs:{type:"primary",size:"small"}},[e._v("登录")])],1)])],1)]),t("el-steps",{attrs:{active:e.active,"finish-status":"success"}},[t("el-step",{attrs:{title:"步骤 1"}}),t("el-step",{attrs:{title:"步骤 2"}})],1),t("section",[t("el-form",{ref:"ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px",autocomplete:"off",size:"medium"}},[0==e.active?t("div",[t("el-form-item",{attrs:{prop:"textarea"}},[t("el-input",{attrs:{value:e.ruleForm.textarea,type:"textarea",rows:10,readonly:!0}})],1),t("el-form-item",{attrs:{prop:"agreed"}},[t("el-checkbox",{staticStyle:{float:"left"},model:{value:e.ruleForm.agreed,callback:function(t){e.$set(e.ruleForm,"agreed",t)},expression:"ruleForm.agreed"}},[e._v("同意注册协议")])],1)],1):e._e(),1==e.active?t("div",[t("el-form-item",{attrs:{label:"用户名",prop:"name"}},[t("el-input",{model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),t("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[t("el-input",{model:{value:e.ruleForm.email,callback:function(t){e.$set(e.ruleForm,"email",t)},expression:"ruleForm.email"}}),t("el-button",{staticStyle:{"margin-top":"2px",float:"left"},attrs:{size:"mini",round:""},on:{click:e.sendMsg}},[e._v("发送验证码")]),t("span",{staticClass:"status"},[e._v(e._s(e.statusMsg))])],1),t("el-form-item",{attrs:{label:"验证码",prop:"code"}},[t("el-input",{attrs:{maxlength:"4"},model:{value:e.ruleForm.code,callback:function(t){e.$set(e.ruleForm,"code",t)},expression:"ruleForm.code"}})],1),t("el-form-item",{attrs:{label:"密码",prop:"password"}},[t("el-input",{attrs:{type:"password"},model:{value:e.ruleForm.password,callback:function(t){e.$set(e.ruleForm,"password",t)},expression:"ruleForm.password"}})],1),t("el-form-item",{attrs:{label:"确认密码",prop:"cpassword"}},[t("el-input",{attrs:{type:"password"},model:{value:e.ruleForm.cpassword,callback:function(t){e.$set(e.ruleForm,"cpassword",t)},expression:"ruleForm.cpassword"}})],1)],1):e._e()])],1),t("div",{staticClass:"footer"},[e.active>0?t("el-button",{attrs:{type:"primary",icon:"el-icon-arrow-left"},on:{click:e.prev}},[e._v("上一步")]):e._e(),e.active<e.step-1?t("el-button",{attrs:{type:"primary",icon:"el-icon-arrow-right"},on:{click:e.next}},[e._v("下一步")]):e._e(),e.active==e.step-1?t("el-button",{attrs:{type:"primary"},on:{click:e.register}},[e._v("同意以下协议并注册")]):e._e(),t("div",{staticClass:"error"},[e._v(e._s(e.error))])],1)],1)},a=[],l=(r("d9e2"),r("14d9"),r("cee4")),i={name:"Register",data(){return{step:2,active:0,statusMsg:"",error:"",ruleForm:{textarea:"请仔细阅读以下协议",agreed:!1,name:"",code:"",password:"",cpassword:"",email:""},rules:{agreed:[{validator:(e,t,r)=>{!0!==t?r(new Error("请确认同意注册协议")):r()},trigger:"blur"}],name:[{required:!0,type:"string",message:"请输入用户名",trigger:"blur"}],email:[{required:!0,type:"email",message:"请输入邮箱",trigger:"blur"}],password:[{required:!0,message:"创建密码",trigger:"blur"}],cpassword:[{required:!0,message:"确认密码",trigger:"blur"}]}}},layout:"blank",methods:{sendMsg:function(){const e=this;let t,r;if(e.timerid)return!1;if(this.$refs["ruleForm"].validateField("name",e=>{t=e}),e.statusMsg="",t)return!1;if(this.$refs["ruleForm"].validateField("email",e=>{r=e}),!t&&!r){let t=60;e.statusMsg=`验证码已发送,剩余${t--}秒`,e.timerid=setInterval((function(){e.statusMsg=`验证码已发送,剩余${t--}秒`,0===t&&clearInterval(e.timerid)}),1e3)}},next:function(){0===this.active&&this.$refs["ruleForm"].validateField("agreed",e=>{""===e&&this.active++})},prev:function(){this.$refs["ruleForm"].clearValidate(),--this.active<0&&(this.active=0)},register:async function(){this.$refs["ruleForm"].validate(async e=>{if(e)try{const e=await l["a"].post("http://localhost:8080/api/register",{username:this.ruleForm.name,email:this.ruleForm.email,password:this.ruleForm.password,cPassword:this.ruleForm.cpassword});200===e.status?(this.$message({showClose:!0,message:"注册成功，正在跳转到登录界面...",type:"success"}),setTimeout(()=>{this.$router.push("/login")},2e3)):this.error=e.data.message||"注册失败"}catch(t){console.error("注册失败:",t),this.$message({showClose:!0,message:"注册失败，请稍后重试",type:"error"})}})}}},o=i,c=(r("c1b3"),r("2877")),u=Object(c["a"])(o,s,a,!1,null,"0b074e53",null);t["default"]=u.exports},c1b3:function(e,t,r){"use strict";r("3ded")}}]);